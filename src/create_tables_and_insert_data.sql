-- create_tables_and_insert_data.sql

CREATE TABLE carts (
    id UUID PRIMARY KEY,
    user_id UUID NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    status VARCHAR(10) NOT NULL CHECK (status IN ('OPEN', 'ORDERED'))
);

CREATE TABLE cart_items (
    cart_id UUID REFERENCES carts(id),
    product_id UUID,
    count INTEGER NOT NULL,
    PRIMARY KEY (cart_id, product_id)
);

INSERT INTO carts (id, user_id, created_at, updated_at, status) VALUES
('11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', NOW(), NOW(), 'OPEN'),
('33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444', NOW(), NOW(), 'ORDERED');

INSERT INTO cart_items (cart_id, product_id, count) VALUES
('11111111-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 2),
('11111111-1111-1111-1111-111111111111', '66666666-6666-6666-6666-666666666666', 1),
('33333333-3333-3333-3333-333333333333', '77777777-7777-7777-7777-777777777777', 5);
